# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание архитектуры проекта

### Архитектурный паттерн

В проекте используется событийно-ориентированная архитектура с выделением слоев "Модель" и "Отображение". Модель и представление данных взаимодействуют через централизованный брокер событий


### Типы данных

Интерфейсы и типы данных слоев модели и отображения представлены в файле /types/index.ts. 

Типы данных и интерфейсы доменной области (модели) спроектированы без привязки к отображению: 

1. IProduct - товар, состоящий из:
    - id - id товара;
    - category - категории;
    - description - описания;
    - image - картинка;
    - name - наименования;
    - price - цены;
2. IBuyer - данные покупателя:
    - id - id покупателя;
    - paymentMethod - метод оплаты;
    - address - адрес; 
    - email - почта;
    - phone - номер телефона;
3. PaymentMethod - метод оплаты:
    - byСard - онлайн по карте
    - byCash - при получении
4. ProductCollection - коллекция товаров
5. ProductCategory - категория продукта;
6. IOrder - заказ, состоящий из:
     - id - id заказа;
     - buyer - покупатель;
     - summ - сумма заказа;
     - basket - список выбранных товаров;
7. IAppState - состояние приложения, включает в себя
     - assortiment - ассортимент товаров
     - order - данные по заказу     

Типы данных и интерфейсы отображения спроектированы исходя из макета: 

1. IPage - отображение коллекции товаров для заказа, состоящее из:
    - items - html элментов для отображения карточек товара
2. ICardView - отображение карточки товара, состоящее из:
    - id - id карточки;
    - category - категория;
	- description - описание;
	- image - картинка;
	- name - наименование;
    - button - кнопка;
	- price - цена;
3. IBasketView - отобржаение корзины, состоящее из:
    - items - коллекция карточек товара в корзине;
    - summ - сумма заказа;
4. IOrderForm - отображение модального окна с информацией по заказу, состоящее из:
    - paymentMethod - метод оплаты;
	- address - адрес покупателя;
5. IContactsForm - отображение модального окна контактов, состоящее из:
    - email - почта;
	- phone - телефон;
6. ISuccessForm - отобржение окна об успешном заказе, состоящее из:
	- summ - сумма заказа;

### Структура кода

#### Модель

Базовый класс модели Model представлен в /components/base/model.ts. Класс параметризирован типом модели - T и содержит ключевой метод emitChanges - инициирование сотытия с данными.
Остальные классы доменной области представлены в файле /components/model.ts. Классы являются наследниками базового класса Model c параметром, который отражает объект модели.

#### Представление

Базовый класс отображения View представлен в /components/base/view.ts. Класс параметризован типом отображения - T, содержит основной html контейнер и объект internalData - 
список ссылок на внутренние компоненты основного html контейнера.
Остальные классы отображения представлены в файле /components/view.ts. Классы являются наследниками базового класса View c параметром - объектом представления.

#### Брокер событий

Реализация брокера сообщений стандартна и представлена в файле /components/base/events.ts классом EventEmitter. 
Брокер событий содержит методы:
- on - установка обработчика на событие;
- off - снятие обработчика с события;
- emit - инициирование события с данными;
- onAll - прослушивание всех событий
- offAll - снятие всех обработчиков
- trigger - создание коллбека триггера, генерирующего событие при вызове


#### Утилитарные классы

- Вспомогательный класс Api представлен в /components/base/api.ts. Содержит методы для взаимодействия с api сервера (get, post)
- Частоиспользуемые утилитарные методы представлены в файле /utils/utils.ts
- Константы представлены в /utils/constants.ts
